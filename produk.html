<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nebula Store</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif;color:#fff}
    body{background:var(--bg) url('https://i.ibb.co/3WfXj0b/stars.png') top center no-repeat fixed;background-size:cover}
    a{text-decoration:none}
    header{padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}
    .logo{font-size:1.4rem;font-weight:700;color:var(--accent)}
    nav{display:flex;gap:1.2rem}
    nav a{padding:.4rem .8rem;border:1px solid transparent;border-radius:var(--radius);transition:.3s}
    nav a:hover{border-color:var(--accent);color:var(--accent)}

    /* ---------- pencarian Google-style ---------- */
    .search-box{
      margin:2rem auto 1rem;
      max-width:560px;
      background:var(--glass);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,.15);
      border-radius:var(--radius);
      display:flex;
      align-items:center;
      padding:.4rem 1rem;
      box-shadow:0 0 15px rgba(0,240,255,.25);
    }
    .search-box input{
      flex:1;
      border:none;
      outline:none;
      background:transparent;
      font-size:1rem;
      padding:.5rem;
    }
    .search-box button{
      background:none;border:none;font-size:1.3rem;cursor:pointer;color:var(--accent);
    }

    /* ---------- kategori + tombol ---------- */
    .cat-wrapper{
      max-width:900px;margin:auto;padding:0 1rem 2rem;
    }
    .stat{
      text-align:center;margin-bottom:.8rem;font-size:.9rem;color:#aaa;
    }
    .category-bar{
      display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;
    }
    .category-bar button{
      background:transparent;
      border:1px solid var(--accent);
      color:var(--accent);
      padding:.45rem 1rem;
      border-radius:20px;
      cursor:pointer;
      transition:.3s;
    }
    .category-bar button.active,
    .category-bar button:hover{background:var(--accent);color:#000}

    /* ---------- grid produk ---------- */
    .product-grid{
      display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:center;padding:0 1rem 3rem;
    }
    .card{
      width:200px;
      background:var(--glass);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius);
      padding:1rem;
      text-align:center;
      display:flex;flex-direction:column;justify-content:space-between;
      transition:.3s;
    }
    .card:hover{transform:translateY(-5px);box-shadow:0 0 20px rgba(0,240,255,.4)}
    .card img{width:100%;border-radius:10px;margin-bottom:.6rem}
    .card h4{margin-bottom:.4rem;font-size:1rem}
    .card p{margin-bottom:.8rem;color:var(--accent);font-weight:600}
    .card button{
      background:var(--accent);color:#000;border:none;padding:.5rem;border-radius:8px;font-weight:600;cursor:pointer;
    }
    footer{text-align:center;padding:1.5rem;font-size:.8rem;color:#aaa}
  </style>
</head>
<body>
 <div class="nebula-bg"></div>
<header>
  <div class="logo">Nebula Store</div>
  <nav>
    <a href="#">Home</a><a href="#">Produk</a><a href="#">Best</a><a href="#">Flash</a><a href="#">Blog</a><a href="#">Kontak</a>
  </nav>
</header>

<!-- ===== Pencarian ===== -->
<div class="search-box">
  <input id="q" placeholder="Cari produk‚Ä¶" onkeyup="cari()">
  <button>üîç</button>
</div>

<!-- ===== Kategori + Total ===== -->
<div class="cat-wrapper">
  <div class="stat">
    <span id="sumKategori">0</span> Kategori &nbsp;&bull;&nbsp;
    <span id="sumProduk">0</span> Produk
  </div>
  <div class="category-bar" id="catBar"></div>
</div>

<!-- ===== Grid Produk ===== -->
<div class="product-grid" id="grid"></div>

<footer>¬© 2025 Nebula Store</footer>

<script>
  let products = [];

  /* ---------- load data dari data/produk.json ---------- */
  fetch("data/products.json")
    .then(res => res.json())
    .then(data => {
      products = data;
      init();
    })
    .catch(err => console.error("Gagal memuat data/produk.json:", err));

  function init(){
    /* ---------- hitung total ---------- */
    const categories = [...new Set(products.map(p=>p.category))];
    document.getElementById('sumKategori').textContent = categories.length;
    document.getElementById('sumProduk').textContent   = products.length;

    /* ---------- render tombol kategori ---------- */
    const catBar = document.getElementById('catBar');
    catBar.innerHTML='<button onclick="filterCat(`all`)">Semua</button>';
    categories.forEach(c=>{
      catBar.innerHTML+=`<button onclick="filterCat('${c}')">${c[0].toUpperCase()+c.slice(1)}</button>`;
    });

    /* ---------- render grid ---------- */
    render(products);       // tampilkan semua di awal
  }

  function render(list){
    const grid = document.getElementById('grid');
    grid.innerHTML='';
    list.forEach(pr=>{
      grid.innerHTML+=`
        <div class="card">
          <img src="${pr.img}" alt="${pr.name}">
          <h4>${pr.name}</h4>
          <p>Rp ${pr.price.toLocaleString()}</p>
          <button onclick="bayar('${pr.name}',${pr.price})">Bayar</button>
        </div>`;
    });
  }

  /* ---------- filter kategori ---------- */
  function filterCat(c){
    [...document.querySelectorAll('.category-bar button')].forEach(b=>b.classList.remove('active'));
    event.target.classList.add('active');
    render( c==='all' ? products : products.filter(p=>p.category===c) );
  }

  /* ---------- pencarian ---------- */
  function cari(){
    const q = document.getElementById('q').value.toLowerCase();
    render( products.filter(p=>p.name.toLowerCase().includes(q)) );
  }

  /* ---------- bayar ---------- */
  function bayar(nama,harga){
    location.href=`payment.html?product=${encodeURIComponent(nama)}&price=${harga}`;
  }
</script>
</body>
  </html>
